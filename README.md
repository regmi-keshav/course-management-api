# Course Management API

## Overview

This project is a Course Management System built with FastAPI. It allows users to manage courses and chapters, rate chapters, and retrieve aggregated ratings for each course. The system uses MongoDB for data storage and provides endpoints for creating, retrieving, and rating courses and chapters.

## Setup

### Prerequisites

- Python 3.8+
- MongoDB

### Installation

1.  Clone the repository:

    ```bash
    git clone https://github.com/regmi-keshav/course-management-api.git
    cd course-management-api
    ```

2.  Install Dependencies

    ```bash
    pip install -r requirements.txt
    ```

3.  Initialize the Database

    Ensure MongoDB is running and execute the script to load data from `courses.json` into MongoDB.

    ```bash
    python init_db.py
    ```

4.  Run the FastAPI Application

    ```bash
    fastapi dev main.py
    ```

## API Endpoints

Go to the URL

```
http://127.0.0.1:8000/docs
```

To access the interactive API documentation for the application running on your local development server, often generated by FastAPI.

1.  Create a Course

    - Method: `POST`
    - URL: `http://localhost:8000/api/courses`
    - Request Body:

      ```json
      {
        "name": "Computer Vision Course",
        "date": "2024-08-08T14:30:00Z",
        "description": "Computer Vision has become ubiquitous in our society.",
        "domain": ["computer vision", "artificial intelligence"],
        "chapters": [
          {
            "name": "Image Classification",
            "text": "Computer Vision Course"
          }
        ]
      }
      ```

    - Response Body

      ```json
      {
        "name": "Computer Vision Course",
        "date": "2024-08-08T14:30:00Z",
        "description": "Computer Vision has become ubiquitous in our society.",
        "domain": ["computer vision", "artificial intelligence"],
        "chapters": [
          {
            "name": "Image Classification",
            "text": "Computer Vision Course",
            "positive_ratings": 0,
            "negative_ratings": 0
          }
        ],
        "ratings": {
          "positive": 0,
          "negative": 0
        },
        "id": "66b4fa923e07ae26b0a09477"
      }
      ```

      <br />

2.  Get All Courses

    - Method: `GET`
    - URL: `http://localhost:8000/api/courses`
    - Response: Retrieve a list of all courses with their details.
      <br />

3.  Get Course Overview

    - Method: `GET`
    - URL:`http://localhost:8000/api/courses/{course_id}`
    - Response: Retrieves detailed information about the course with `course_id`

 <br />

4.  Get Chapter Info

    - Method: `GET`
    - URL: `http://localhost:8000/api/courses/{course_id}/chapters/{chapter_identifier}`

      1. Example with chapter_index
         ```
         http://localhost:8000/api/courses/66b4ca287be6860657e09aaf/chapters/1
         ```
      2. Example with chapter_name
         ```
         http://localhost:8000/api/courses/66b4ca287be6860657e09aaf/chapters/Image Classification/
         ```

    - Replace `{chapter_identifier}`with either the chapter name or index.

    - Description: Retrieve information for a chapter by name or index.
    - Parameters:
      - `course_id`: The ID of the course.
      - `chapter_identifier`: The name or index of the chapter.
    - Response:

      ```json
      {
        "name": "Image Classification",
        "text": "Computer Vision Course",
        "positive_ratings": 0,
        "negative_ratings": 1
      }
      ```

    <br />

5.  Rate Chapter

    - Method: POST
    - URL: `http://localhost:8000/api/courses/{course_id}/rate-chapter`
    - Description: Rate a chapter as positive or negative.

    - Parameters:
      - `course_id`: The ID of the course.
    - Request Body:

      ```json
      {
        "chapter_name": "Chapter Name",
        "chapter_index": 0,
        "rating": true
      }
      ```

    - Response Body:

      ```json
      {
        "msg": "Rating updated successfully"
      }
      ```

      <br />

6.  Get Course Ratings

    - Method: `GET`
    - URL: `http://localhost:8000/api/courses/{course_id}/ratings`
    - Description: Retrieve the aggregated ratings for a specific course.
    - Parameters:
      - `course_id`: The ID of the course.
    - Response:

    ```json
    {
      "course_id": "66b4ca287be6860657e09aaf",
      "ratings": {
        "positive": 6,
        "negative": 2,
        "total": 8
      }
    }
    ```
